{
  "name": "Bookshelf-cascade-delete",
  "tagline": "Cascade delete with Bookshelf.js",
  "body": "## Overview\r\n\r\nThis [Bookshelf.js](https://github.com/tgriesser/bookshelf) plugin provides cascade delete with a simple configuration on your models.\r\n\r\n## Status\r\n\r\n[![npm version][npm-image]][npm-url] [![build status][travis-image]][travis-url] [![coverage status][coveralls-image]][coveralls-url]\r\n\r\n## Installation\r\n\r\nInstall the package via `npm`:\r\n\r\n```sh\r\n$ npm install --save bookshelf-cascade-delete\r\n```\r\n\r\n## Usage\r\n\r\nRequire and register the `bookshelf-cascade-delete` plugin:\r\n\r\n```js\r\nvar bookshelf = require('bookshelf')(knex);\r\nvar cascadeDelete = require('bookshelf-cascade-delete');\r\n\r\n// You need to access the `default` property since the plugin is transpilled from es6 modules syntax.\r\nbookshelf.plugin(cascadeDelete.default);\r\n```\r\n\r\nDefine which relations depend on your model when it's destroyed with the `dependents` prototype property:\r\n\r\n```js\r\nvar Post = bookshelf.Model.extend({\r\n  tableName: 'Post'\r\n});\r\n\r\nvar Author = bookshelf.Model.extend({\r\n  tableName: 'Author',\r\n  posts: function() {\r\n    return this.hasMany(Post);\r\n  }\r\n}, {\r\n  dependents: ['posts']\r\n});\r\n```\r\n\r\n**NOTE:** This plugin extends the `destroy` method of Bookshelf's `Model`, so if you are extending or overriding it on your models make sure to call its prototype after your work is done:\r\n\r\n```js\r\nvar Author = bookshelf.Model.extend({\r\n  tableName: 'Author',\r\n  posts: function() {\r\n    return this.hasMany(Post);\r\n  },\r\n  destroy: function() {\r\n    // Do some stuff.\r\n    sendDeleteAccountEmail(this);\r\n\r\n    // Call the destroy prototype method.\r\n    bookshelf.Model.prototype.destroy.apply(this, arguments);\r\n  }\r\n}, {\r\n  dependents: ['posts']\r\n});\r\n```\r\n\r\n## Contributing\r\n\r\nFeel free to fork this repository and submit pull requests. To run the tests, duplicate the `test/mysql.knexfile.js.dist` and `test/postgres.knexfile.js.dist` files, update them to your needs and run:\r\n\r\n```sh\r\n$ npm test\r\n```\r\n\r\n## Credits\r\n\r\nThis plugin's code is heavily inspired on the [tkellen](https://github.com/tkellen) contribution for this [issue](https://github.com/tgriesser/bookshelf/issues/135), so cheers to him for making our job really easy!\r\n\r\n## License\r\n\r\nMIT\r\n\r\n[coveralls-image]: https://img.shields.io/coveralls/seegno/bookshelf-cascade-delete/master.svg?style=flat-square\r\n[coveralls-url]: https://coveralls.io/github/seegno/bookshelf-cascade-delete?branch=master\r\n[npm-image]: https://img.shields.io/npm/v/bookshelf-cascade-delete.svg?style=flat-square\r\n[npm-url]: https://npmjs.org/package/bookshelf-cascade-delete\r\n[travis-image]: https://img.shields.io/travis/seegno/bookshelf-cascade-delete.svg?style=flat-square\r\n[travis-url]: https://travis-ci.org/seegno/bookshelf-cascade-delete\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}